set IlcPath=e:\github\corert\bin\WebAssembly.wasm.Debug

# build full framework version
"E:\GitHub\corert\buildscripts\..\Tools\dotnetcli\dotnet.exe" msbuild /m /ConsoleLoggerParameters:ForceNoAlign "/p:IlcPath=E:\GitHub\corert\tests\\..\bin\WebAssembly.wasm.Debug" "/p:Configuration=Debug" "/p:OSGroup=WebAssembly" "/p:Platform=wasm" "/p:RepoLocalBuild=true" "/p:FrameworkLibPath=E:\GitHub\corert\tests\..\bin\WebAssembly.wasm.Debug\lib" "/p:FrameworkObjPath=E:\GitHub\corert\tests\..\bin\obj\WebAssembly.wasm.Debug\Framework" /p:NativeCodeGen=wasm wasmsdl.csproj


# Commands to build mini runtime version

emcc MiniRuntime.wasm.c -c -o MiniRuntime.bc 

dotnet exec "c:\Program Files\dotnet\sdk\5.0.100-preview.7.20366.6\Roslyn\bincore"\csc.dll /O /noconfig /nostdlib /runtimemetadataversion:v4.0.30319 MiniRuntime.cs MiniBCL.cs Program.cs sdl\SDL2.cs /out:wasmsdl.ilexe /langversion:preview /unsafe -define:CODEGEN_WASM MiniRandom.cs

..\corert\bin\WebAssembly.wasm.Debug\tools\ilc --targetarch=wasm wasmsdl.ilexe -o wasmsdl.bc --systemmodule:wasmsdl --Os -g

"E:\GitHub\emsdk\upstream\emscripten\emcc.bat" "wasmsdl.bc" -o "wasmsdl.html" --emrun MiniRuntime.bc --shell-file pal\shell_minimal.html -Os -s USE_SDL=2


